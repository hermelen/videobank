{% extends "rentmanager/base.html" %}
{% load static %}
{% block content %}

{% for movie in object_list %}
<div class="card list-card">
  <img class="card-img-top" src="{{ movie.picture.url }}" alt="Card image cap">
  <div class="card-body">
    <h5 class="card-title">{{ movie.title }}</h5>
  </div>
  <ul class="list-group list-group-flush">
    <li class="list-group-item">{{ movie.genre }}</li>
    <li class="list-group-item">{{ movie.release_date|date:'d-m-Y' }}</li>
    <li class="list-group-item">{{ movie.director.first_name.capitalize }} {{ movie.director.last_name.capitalize }}</li>
  </ul>
  <div class="card-body">
    {% if perms.rentmanager and perms.rentmanager.add_movie %}
    <a href="{% url 'movie-update' movie.slug %}" class="btn btn-warning">Modifier</a>
    <a href="{% url 'movie-delete' movie.slug %}" class="btn btn-danger">Supprimer</a>
    {% else %}
      <a href="{% url 'movie-detail' movie.slug %}" class="btn btn-primary">Voir plus</a>
      {% if movie.rented == True %}
      <a href="#" class="btn btn-danger">Loué</a>
      {% else %}
        {% if request.user.is_authenticated %}
        <a href="{% url 'rent' movie.slug request.user.id %}" class="btn btn-success">Réserver</a>
        {% endif %}
      {% endif %}
    {% endif %}

  </div>
</div>
{% endfor %}

{% endblock %}
